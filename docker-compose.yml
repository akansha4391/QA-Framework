version: '3.8'

services:
  test-runner:
    build: .
    container_name: qa-framework-runner
    volumes:
      # Mount current directory to allow code changes to be reflected immediately
      - .:/app
      # Avoid overwriting container's python environment with local venv
      - /app/.venv
      # Isolate node_modules to prevents OS mismatch (Mac vs Linux) and ensure container uses its own
      - /app/docs-site/node_modules
    ipc: host # Recommended for Playwright
    ports:
      - "3000:3000" # Expose Documentation Site
    environment:
      - BASE_URL=https://www.google.com
      - HEADLESS=true
      - BROWSER=chrome
      - LOG_LEVEL=INFO
    command: ["-c", "echo 'Container ready. Run `qa-init` or `pytest` here.' && tail -f /dev/null"]
